{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\n\n// Definicja interfejsu dla pojedynczego samochodu\n\n// Definicja interfejsu dla stanu aplikacji\n\n// Inicjalny stan aplikacji: 3 samochody każdego typu\nconst initialState = {\n  availableCars: [{\n    id: 1,\n    type: 'sedan',\n    available: true\n  }, {\n    id: 2,\n    type: 'sedan',\n    available: true\n  }, {\n    id: 3,\n    type: 'sedan',\n    available: true\n  }, {\n    id: 4,\n    type: 'SUV',\n    available: true\n  }, {\n    id: 5,\n    type: 'SUV',\n    available: true\n  }, {\n    id: 6,\n    type: 'SUV',\n    available: true\n  }, {\n    id: 7,\n    type: 'van',\n    available: true\n  }, {\n    id: 8,\n    type: 'van',\n    available: true\n  }, {\n    id: 9,\n    type: 'van',\n    available: true\n  }],\n  rentals: [] // Historia wypożyczeń\n};\nconst carSlice = createSlice({\n  name: 'cars',\n  initialState,\n  reducers: {\n    reserveCar: (state, action) => {\n      const car = state.availableCars.find(c => c.id === action.payload.carId);\n\n      // Sprawdź, czy samochód jest dostępny\n      if (car && car.available) {\n        // Sprawdź, czy są dostępne inne samochody tego samego typu\n        const rentedCarsOfType = state.rentals.filter(rental => rental.type === action.payload.type).length;\n        if (rentedCarsOfType < 3) {\n          car.available = false; // Oznacz samochód jako wypożyczony\n          state.rentals.push(action.payload); // Dodaj rezerwację do historii wypożyczeń\n        } else {\n          console.log(`Limit 3 sztuk ${action.payload.type} został osiągnięty.`);\n        }\n      }\n    },\n    returnCar: (state, action) => {\n      const car = state.availableCars.find(c => c.id === action.payload);\n      if (car) {\n        car.available = true; // Oznacz samochód jako zwrócony\n        // Usuń z historii wypożyczeń\n        state.rentals = state.rentals.filter(rental => rental.carId !== action.payload);\n      }\n    }\n  }\n});\nexport const {\n  reserveCar,\n  returnCar\n} = carSlice.actions;\nexport default carSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","availableCars","id","type","available","rentals","carSlice","name","reducers","reserveCar","state","action","car","find","c","payload","carId","rentedCarsOfType","filter","rental","length","push","console","log","returnCar","actions","reducer"],"sources":["/Users/patrykliberski/Downloads/Dev/car-rental-system/src/features/cars/carSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\n// Definicja interfejsu dla pojedynczego samochodu\ninterface Car {\n  id: number;\n  type: 'sedan' | 'SUV' | 'van';\n  available: boolean;\n}\n\n// Definicja interfejsu dla stanu aplikacji\ninterface CarState {\n  availableCars: Car[];\n  rentals: { carId: number; type: string; startDate: string; days: number }[];\n}\n\n// Inicjalny stan aplikacji: 3 samochody każdego typu\nconst initialState: CarState = {\n  availableCars: [\n    { id: 1, type: 'sedan', available: true },\n    { id: 2, type: 'sedan', available: true },\n    { id: 3, type: 'sedan', available: true },\n    { id: 4, type: 'SUV', available: true },\n    { id: 5, type: 'SUV', available: true },\n    { id: 6, type: 'SUV', available: true },\n    { id: 7, type: 'van', available: true },\n    { id: 8, type: 'van', available: true },\n    { id: 9, type: 'van', available: true },\n  ],\n  rentals: [], // Historia wypożyczeń\n};\n\nconst carSlice = createSlice({\n  name: 'cars',\n  initialState,\n  reducers: {\n    reserveCar: (state, action: PayloadAction<{ carId: number; type: string; startDate: string; days: number }>) => {\n      const car = state.availableCars.find(c => c.id === action.payload.carId);\n\n      // Sprawdź, czy samochód jest dostępny\n      if (car && car.available) {\n        // Sprawdź, czy są dostępne inne samochody tego samego typu\n        const rentedCarsOfType = state.rentals.filter(rental => rental.type === action.payload.type).length;\n        \n        if (rentedCarsOfType < 3) {\n          car.available = false; // Oznacz samochód jako wypożyczony\n          state.rentals.push(action.payload); // Dodaj rezerwację do historii wypożyczeń\n        } else {\n          console.log(`Limit 3 sztuk ${action.payload.type} został osiągnięty.`);\n        }\n      }\n    },\n    returnCar: (state, action: PayloadAction<number>) => {\n      const car = state.availableCars.find(c => c.id === action.payload);\n\n      if (car) {\n        car.available = true; // Oznacz samochód jako zwrócony\n        // Usuń z historii wypożyczeń\n        state.rentals = state.rentals.filter(rental => rental.carId !== action.payload);\n      }\n    },\n  },\n});\n\nexport const { reserveCar, returnCar } = carSlice.actions;\nexport default carSlice.reducer;\n"],"mappings":"AAAA,SAASA,WAAW,QAAuB,kBAAkB;;AAE7D;;AAOA;;AAMA;AACA,MAAMC,YAAsB,GAAG;EAC7BC,aAAa,EAAE,CACb;IAAEC,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,OAAO;IAAEC,SAAS,EAAE;EAAK,CAAC,EACzC;IAAEF,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,OAAO;IAAEC,SAAS,EAAE;EAAK,CAAC,EACzC;IAAEF,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,OAAO;IAAEC,SAAS,EAAE;EAAK,CAAC,EACzC;IAAEF,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,KAAK;IAAEC,SAAS,EAAE;EAAK,CAAC,EACvC;IAAEF,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,KAAK;IAAEC,SAAS,EAAE;EAAK,CAAC,EACvC;IAAEF,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,KAAK;IAAEC,SAAS,EAAE;EAAK,CAAC,EACvC;IAAEF,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,KAAK;IAAEC,SAAS,EAAE;EAAK,CAAC,EACvC;IAAEF,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,KAAK;IAAEC,SAAS,EAAE;EAAK,CAAC,EACvC;IAAEF,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,KAAK;IAAEC,SAAS,EAAE;EAAK,CAAC,CACxC;EACDC,OAAO,EAAE,EAAE,CAAE;AACf,CAAC;AAED,MAAMC,QAAQ,GAAGP,WAAW,CAAC;EAC3BQ,IAAI,EAAE,MAAM;EACZP,YAAY;EACZQ,QAAQ,EAAE;IACRC,UAAU,EAAEA,CAACC,KAAK,EAAEC,MAAuF,KAAK;MAC9G,MAAMC,GAAG,GAAGF,KAAK,CAACT,aAAa,CAACY,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACZ,EAAE,KAAKS,MAAM,CAACI,OAAO,CAACC,KAAK,CAAC;;MAExE;MACA,IAAIJ,GAAG,IAAIA,GAAG,CAACR,SAAS,EAAE;QACxB;QACA,MAAMa,gBAAgB,GAAGP,KAAK,CAACL,OAAO,CAACa,MAAM,CAACC,MAAM,IAAIA,MAAM,CAAChB,IAAI,KAAKQ,MAAM,CAACI,OAAO,CAACZ,IAAI,CAAC,CAACiB,MAAM;QAEnG,IAAIH,gBAAgB,GAAG,CAAC,EAAE;UACxBL,GAAG,CAACR,SAAS,GAAG,KAAK,CAAC,CAAC;UACvBM,KAAK,CAACL,OAAO,CAACgB,IAAI,CAACV,MAAM,CAACI,OAAO,CAAC,CAAC,CAAC;QACtC,CAAC,MAAM;UACLO,OAAO,CAACC,GAAG,CAAC,iBAAiBZ,MAAM,CAACI,OAAO,CAACZ,IAAI,qBAAqB,CAAC;QACxE;MACF;IACF,CAAC;IACDqB,SAAS,EAAEA,CAACd,KAAK,EAAEC,MAA6B,KAAK;MACnD,MAAMC,GAAG,GAAGF,KAAK,CAACT,aAAa,CAACY,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACZ,EAAE,KAAKS,MAAM,CAACI,OAAO,CAAC;MAElE,IAAIH,GAAG,EAAE;QACPA,GAAG,CAACR,SAAS,GAAG,IAAI,CAAC,CAAC;QACtB;QACAM,KAAK,CAACL,OAAO,GAAGK,KAAK,CAACL,OAAO,CAACa,MAAM,CAACC,MAAM,IAAIA,MAAM,CAACH,KAAK,KAAKL,MAAM,CAACI,OAAO,CAAC;MACjF;IACF;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEN,UAAU;EAAEe;AAAU,CAAC,GAAGlB,QAAQ,CAACmB,OAAO;AACzD,eAAenB,QAAQ,CAACoB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}